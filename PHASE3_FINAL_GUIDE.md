# FREE LMS - Phase 3: –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∑–∞–ø—É—Å–∫–∞

## üéâ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞: –ì–û–¢–û–í –ö PRODUCTION

–í—Å–µ 3 —Ñ–∞–∑—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã! –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä Phase 3](#–æ–±–∑–æ—Ä-phase-3)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
4. [–ó–∞–ø—É—Å–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#–∑–∞–ø—É—Å–∫-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
5. [Production deployment](#production-deployment)
6. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–º–æ–¥—É–ª–µ–π)
7. [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
8. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)

---

## üöÄ –û–±–∑–æ—Ä Phase 3

Phase 3 –¥–æ–±–∞–≤–ª—è–µ—Ç enterprise-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏:

#### 1. **Subscriptions & Monetization** üí∞
- 5 —Ç–∞—Ä–∏—Ñ–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤ (FREE, BASIC, PRO, BUSINESS, ENTERPRISE)
- –ú—É–ª—å—Ç–∏-–≤–∞–ª—é—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (USD, UZS, EUR, RUB)
- –ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –∏ auto-renewal
- Seat-based licensing
- Usage-based limits

#### 2. **Organizations & Multi-tenancy** üè¢
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π —Å —Ä–æ–ª—è–º–∏
- White-label –±—Ä–µ–Ω–¥–∏–Ω–≥
- Custom domain support
- SSO –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (SAML, OAuth2, OIDC, LDAP)

#### 3. **Payment Processing** üí≥
- 3 –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —à–ª—é–∑–∞: Stripe, Payme, Click
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ webhooks
- Invoice generation (PDF)
- Subscription billing
- Refunds –∏ chargebacks

#### 4. **SCORM Support** üì¶
- SCORM 1.2 –∏ 2004
- Package upload –∏ validation
- Interactive player
- Progress tracking
- Completion certificates

#### 5. **Live Webinars** üé•
- Zoom –∏ Jitsi –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- Scheduling —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º
- Live video rooms
- Chat –∏ Q&A
- Recording playback
- Attendance tracking

#### 6. **REST API** ‚öôÔ∏è
- API key management
- Rate limiting
- Comprehensive endpoints
- Swagger documentation
- Webhook support

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend Stack:
```
NestJS 10.x
‚îú‚îÄ‚îÄ TypeORM (PostgreSQL)
‚îú‚îÄ‚îÄ Passport JWT
‚îú‚îÄ‚îÄ Bull (Redis queues)
‚îú‚îÄ‚îÄ Stripe SDK
‚îú‚îÄ‚îÄ Payme/Click APIs
‚îú‚îÄ‚îÄ Zoom SDK
‚îú‚îÄ‚îÄ SAML2-js
‚îî‚îÄ‚îÄ OpenID Connect
```

### Frontend Stack:
```
Angular 17+
‚îú‚îÄ‚îÄ Standalone Components
‚îú‚îÄ‚îÄ Signals (reactivity)
‚îú‚îÄ‚îÄ RxJS 7.8+
‚îú‚îÄ‚îÄ TypeScript 5.3+
‚îî‚îÄ‚îÄ Custom CSS
```

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
‚îú‚îÄ‚îÄ PostgreSQL 14+ (–¥–∞–Ω–Ω—ã–µ)
‚îú‚îÄ‚îÄ Redis 7+ (–∫—ç—à, –æ—á–µ—Ä–µ–¥–∏)
‚îú‚îÄ‚îÄ S3/MinIO (—Ñ–∞–π–ª—ã, SCORM)
‚îú‚îÄ‚îÄ Nginx (reverse proxy)
‚îî‚îÄ‚îÄ Docker (containerization)
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Node.js 18+ LTS
- PostgreSQL 14+
- Redis 7+
- npm/yarn
- Git

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd FREE_LMS

# Backend
cd backend
npm install

# Frontend
cd ../frontend
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
# –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
createdb free_lms

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
cd backend
npm run migration:run
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è:

#### Backend (.env):
```env
# Database
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=your_password
DATABASE_NAME=free_lms

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379

# JWT
JWT_SECRET=your_super_secret_jwt_key_change_in_production
JWT_EXPIRES_IN=7d

# Payment Gateways
STRIPE_SECRET_KEY=sk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...
PAYME_MERCHANT_ID=your_merchant_id
PAYME_MERCHANT_KEY=your_merchant_key
CLICK_SERVICE_ID=your_service_id
CLICK_SECRET_KEY=your_secret_key

# SSO
SAML_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----...
SAML_CERTIFICATE=-----BEGIN CERTIFICATE-----...
LDAP_URL=ldap://your-ldap-server.com:389
LDAP_BIND_DN=cn=admin,dc=example,dc=com
LDAP_BIND_PASSWORD=admin_password

# Webinars
ZOOM_API_KEY=your_zoom_api_key
ZOOM_API_SECRET=your_zoom_api_secret
JITSI_DOMAIN=meet.jit.si

# SCORM
SCORM_STORAGE_PATH=/var/www/scorm
SCORM_BASE_URL=https://yourdomain.com/scorm-content

# Features
ENABLE_MULTI_TENANCY=true
ENABLE_WHITE_LABEL=true
ENABLE_SSO=true
```

#### Frontend (environment.ts):
```typescript
export const environment = {
  production: true,
  apiUrl: 'https://api.yourdomain.com/api/v1',

  stripe: {
    publicKey: 'pk_live_...',
  },

  payme: {
    merchantId: 'your_merchant_id',
  },

  click: {
    merchantId: 'your_merchant_id',
  },

  zoom: {
    apiKey: 'your_zoom_api_key',
    apiSecret: 'your_zoom_api_secret',
  },

  jitsi: {
    domain: 'meet.jit.si',
  },

  scorm: {
    storageUrl: 'https://yourdomain.com/scorm-content',
  },

  features: {
    subscriptions: true,
    multiTenancy: true,
    scormSupport: true,
    webinars: true,
    whiteLabel: true,
    sso: true,
    api: true,
  },
};
```

---

## üîß –ó–∞–ø—É—Å–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Backend:
```bash
cd backend

# Development mode
npm run start:dev

# Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞:
# http://localhost:3000/api/docs
```

### Frontend:
```bash
cd frontend

# Development server
npm start

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞:
# http://localhost:4200
```

### Redis (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):
```bash
# MacOS
brew install redis
brew services start redis

# Linux
sudo apt install redis
sudo systemctl start redis

# Docker
docker run -d -p 6379:6379 redis:alpine
```

---

## üö¢ Production Deployment

### 1. Build:

```bash
# Backend
cd backend
npm run build

# Frontend
cd frontend
npm run build -- --configuration production
```

### 2. Docker Deployment:

**docker-compose.yml:**
```yaml
version: '3.8'

services:
  postgres:
    image: postgres:14-alpine
    environment:
      POSTGRES_DB: free_lms
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  backend:
    build: ./backend
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - DATABASE_HOST=postgres
      - REDIS_HOST=redis
    depends_on:
      - postgres
      - redis
    volumes:
      - ./scorm-content:/var/www/scorm

  frontend:
    build: ./frontend
    ports:
      - "80:80"
    depends_on:
      - backend

volumes:
  postgres_data:
```

**–ó–∞–ø—É—Å–∫:**
```bash
docker-compose up -d
```

### 3. Nginx Configuration:

```nginx
server {
    listen 80;
    server_name yourdomain.com;

    # Frontend
    location / {
        root /var/www/frontend/dist;
        try_files $uri $uri/ /index.html;
    }

    # Backend API
    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # SCORM Content
    location /scorm-content {
        alias /var/www/scorm;
        add_header Access-Control-Allow-Origin *;
    }

    # WebSocket –¥–ª—è –≤–µ–±–∏–Ω–∞—Ä–æ–≤
    location /ws {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "Upgrade";
    }
}
```

### 4. SSL —Å Let's Encrypt:

```bash
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com
```

---

## üîê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π

### Stripe Setup:

1. –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ https://stripe.com
2. –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏ –≤ Dashboard > Developers > API keys
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhooks:
   - URL: `https://yourdomain.com/api/payments/stripe/webhook`
   - Events: `payment_intent.succeeded`, `payment_intent.payment_failed`, `customer.subscription.updated`

### Payme Setup:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ https://payme.uz/
2. –ü–æ–ª—É—á–∏—Ç—å merchant ID –∏ key
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook URL: `https://yourdomain.com/api/payments/payme/webhook`

### Click Setup:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ https://click.uz/
2. –ü–æ–ª—É—á–∏—Ç—å service ID –∏ secret key
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å callback URL: `https://yourdomain.com/api/payments/click/callback`

### Zoom Integration:

1. –°–æ–∑–¥–∞—Ç—å Zoom App –Ω–∞ https://marketplace.zoom.us/
2. –ü–æ–ª—É—á–∏—Ç—å API Key –∏ Secret
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å OAuth redirect URL

### SSO Configuration:

#### SAML 2.0:
```typescript
// –í backend config
saml: {
  privateKey: fs.readFileSync('cert/key.pem', 'utf8'),
  certificate: fs.readFileSync('cert/cert.pem', 'utf8'),
  callbackUrl: 'https://yourdomain.com/api/auth/saml/callback',
  entryPoint: 'https://idp.example.com/sso/saml',
  issuer: 'https://yourdomain.com',
}
```

#### OAuth 2.0 / OIDC:
```typescript
oauth: {
  clientId: 'your-client-id',
  clientSecret: 'your-client-secret',
  callbackURL: 'https://yourdomain.com/api/auth/oauth/callback',
  authorizationURL: 'https://provider.com/oauth/authorize',
  tokenURL: 'https://provider.com/oauth/token',
}
```

---

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### Base URL:
```
Development: http://localhost:3000/api/v1
Production: https://api.yourdomain.com/api/v1
```

### Authentication:
```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω
POST /auth/login
{
  "email": "user@example.com",
  "password": "password"
}

# Response
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": { ... }
}

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
Authorization: Bearer <access_token>
```

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints:

#### Subscriptions:
```bash
GET    /subscriptions/plans          # –í—Å–µ —Ç–∞—Ä–∏—Ñ—ã
POST   /subscriptions                # –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
GET    /subscriptions/current        # –¢–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
PATCH  /subscriptions/:id/upgrade    # –û–±–Ω–æ–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ
DELETE /subscriptions/:id            # –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
```

#### Organizations:
```bash
POST   /organizations                # –°–æ–∑–¥–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
GET    /organizations/:id            # –ü–æ–ª—É—á–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
PATCH  /organizations/:id            # –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
GET    /organizations/:id/members    # –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
POST   /organizations/:id/invite     # –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞
```

#### Payments:
```bash
POST   /payments                     # –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂
GET    /payments/:id                 # –°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
POST   /payments/:id/confirm         # –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–ª–∞—Ç–µ–∂
GET    /payments/invoices            # –°–ø–∏—Å–æ–∫ —Å—á–µ—Ç–æ–≤
```

#### SCORM:
```bash
POST   /scorm/upload                 # –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–∞–∫–µ—Ç
GET    /scorm                        # –°–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤
POST   /scorm/:id/launch             # –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞–∫–µ—Ç
PATCH  /scorm/:id/tracking           # –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
```

#### Webinars:
```bash
POST   /webinars                     # –°–æ–∑–¥–∞—Ç—å –≤–µ–±–∏–Ω–∞—Ä
GET    /webinars                     # –°–ø–∏—Å–æ–∫ –≤–µ–±–∏–Ω–∞—Ä–æ–≤
POST   /webinars/:id/join            # –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
POST   /webinars/:id/start           # –ù–∞—á–∞—Ç—å –≤–µ–±–∏–Ω–∞—Ä
GET    /webinars/:id/recording       # –ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å—å
```

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** http://localhost:3000/api/docs (Swagger)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit Tests:

```bash
# Backend
cd backend
npm run test

# Frontend
cd frontend
npm run test
```

### E2E Tests:

```bash
# Backend
cd backend
npm run test:e2e

# Frontend
cd frontend
npm run e2e
```

### Load Testing:

```bash
# –° –ø–æ–º–æ—â—å—é Apache Bench
ab -n 1000 -c 10 http://localhost:3000/api/health

# –° –ø–æ–º–æ—â—å—é Artillery
artillery quick --count 10 --num 50 http://localhost:3000/api/courses
```

### Test Coverage:

```bash
# Backend
npm run test:cov

# Frontend
npm run test -- --code-coverage
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Checks:

```bash
# Application health
GET /health

# Database health
GET /health/db

# Redis health
GET /health/redis
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Winston –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤:

```typescript
// –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤
logger.error('Payment failed', { paymentId, error });
logger.warn('Rate limit exceeded', { userId, ip });
logger.info('User subscribed', { userId, planId });
logger.debug('Cache hit', { key });
```

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
- `logs/error.log` - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
- `logs/combined.log` - –≤—Å–µ –ª–æ–≥–∏
- Console (development)

### –ú–µ—Ç—Ä–∏–∫–∏:

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus:

```yaml
# prometheus.yml
scrape_configs:
  - job_name: 'free-lms'
    static_configs:
      - targets: ['localhost:3000']
    metrics_path: '/metrics'
```

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ Use Cases

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:

```typescript
// Frontend
this.orgService.createOrganization({
  name: 'Acme Corp',
  slug: 'acme',
  seats: 50
}).subscribe(org => {
  console.log('Organization created:', org);
});
```

### 2. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø–ª–∞–Ω:

```typescript
// Frontend
this.subscriptionService.subscribe({
  planId: 3, // PRO plan
  billingPeriod: 'yearly',
  paymentMethod: 'stripe'
}).subscribe(subscription => {
  // Redirect to payment
  window.location.href = subscription.paymentUrl;
});
```

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ SCORM:

```typescript
// Frontend
const formData = new FormData();
formData.append('file', scormZipFile);
formData.append('title', 'Course Name');

this.scormService.uploadPackage(formData).subscribe(pkg => {
  console.log('SCORM uploaded:', pkg);
});
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–±–∏–Ω–∞—Ä–∞:

```typescript
// Frontend
this.webinarService.createWebinar({
  title: 'Live Training',
  scheduledAt: new Date('2024-12-01 14:00'),
  duration: 60,
  provider: 'zoom',
  maxParticipants: 100
}).subscribe(webinar => {
  console.log('Webinar scheduled:', webinar);
});
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Checklist:

- [x] HTTPS everywhere (SSL/TLS)
- [x] JWT —Å –∫–æ—Ä–æ—Ç–∫–∏–º —Å—Ä–æ–∫–æ–º –∂–∏–∑–Ω–∏
- [x] Rate limiting –Ω–∞ API
- [x] SQL injection –∑–∞—â–∏—Ç–∞ (TypeORM)
- [x] XSS –∑–∞—â–∏—Ç–∞ (Content Security Policy)
- [x] CSRF –∑–∞—â–∏—Ç–∞ (tokens)
- [x] Input validation (class-validator)
- [x] Password hashing (bcrypt)
- [x] API key rotation
- [x] Webhook signature verification
- [x] CORS configuration
- [x] Security headers (Helmet)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   npm audit
   npm audit fix
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å secrets management:**
   - AWS Secrets Manager
   - HashiCorp Vault
   - Kubernetes Secrets

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
   - Sentry –¥–ª—è error tracking
   - CloudFlare –¥–ª—è DDoS –∑–∞—â–∏—Ç—ã
   - fail2ban –¥–ª—è brute force –∑–∞—â–∏—Ç—ã

---

## üí° Best Practices

### Backend:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:
   ```typescript
   await this.dataSource.transaction(async manager => {
     await manager.save(payment);
     await manager.save(subscription);
   });
   ```

2. **–ö—ç—à–∏—Ä—É–π—Ç–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
   ```typescript
   @Cacheable('plans', 3600) // 1 —á–∞—Å
   async getPlans() {
     return this.planRepository.find();
   }
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—á–µ—Ä–µ–¥–∏** –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∑–∞–¥–∞—á:
   ```typescript
   await this.emailQueue.add('welcome', { userId });
   ```

### Frontend:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Signals** –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
   ```typescript
   user = signal<User | null>(null);
   isAdmin = computed(() => this.user()?.role === 'admin');
   ```

2. **Lazy loading** –¥–ª—è –±–æ–ª—å—à–∏—Ö –º–æ–¥—É–ª–µ–π:
   ```typescript
   loadChildren: () => import('./features/scorm/scorm.routes')
   ```

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
   ```typescript
   this.api.getData().pipe(
     catchError(error => {
       this.toastr.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏');
       return of([]);
     })
   ).subscribe();
   ```

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### Horizontal Scaling:

```yaml
# Kubernetes deployment
apiVersion: apps/v1
kind: Deployment
metadata:
  name: free-lms-backend
spec:
  replicas: 3  # –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
  selector:
    matchLabels:
      app: backend
  template:
    spec:
      containers:
      - name: backend
        image: free-lms:latest
        resources:
          requests:
            memory: "512Mi"
            cpu: "500m"
          limits:
            memory: "1Gi"
            cpu: "1000m"
```

### Database Optimization:

1. **–ò–Ω–¥–µ–∫—Å—ã:**
   ```sql
   CREATE INDEX idx_users_email ON users(email);
   CREATE INDEX idx_subscriptions_user ON subscriptions(user_id);
   ```

2. **Connection pooling:**
   ```typescript
   extra: {
     max: 20,  // –ú–∞–∫—Å. —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
     min: 5,   // –ú–∏–Ω. —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
   }
   ```

3. **Read replicas:**
   ```typescript
   replication: {
     master: { /* ... */ },
     slaves: [{ /* replica 1 */ }, { /* replica 2 */ }]
   }
   ```

---

## üêõ Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

**1. –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–ø—É—â–µ–Ω–∞ –ª–∏ PostgreSQL
sudo systemctl status postgresql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
psql -h localhost -U postgres -d free_lms
```

**2. Redis connection refused:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Redis
redis-server

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
redis-cli ping  # –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å PONG
```

**3. CORS –æ—à–∏–±–∫–∏:**
```typescript
// backend/main.ts
app.enableCors({
  origin: ['http://localhost:4200', 'https://yourdomain.com'],
  credentials: true,
});
```

**4. Stripe webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å Stripe CLI
stripe listen --forward-to localhost:3000/api/payments/stripe/webhook
```

**5. SCORM –ø–∞–∫–µ—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–µ scorm-content
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ imsmanifest.xml –≤ –∫–æ—Ä–Ω–µ –∞—Ä—Ö–∏–≤–∞

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- Backend API: `http://localhost:3000/api/docs`
- Frontend: `http://localhost:4200`
- Wiki: `https://github.com/your-repo/wiki`

### –ö–æ–Ω—Ç–∞–∫—Ç—ã:
- Email: support@yourdomain.com
- GitHub Issues: https://github.com/your-repo/issues
- Slack: your-workspace.slack.com

---

## üéì –û–±—É—á–∞—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –í–∏–¥–µ–æ —Ç—É—Ç–æ—Ä–∏–∞–ª—ã:
1. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (10 –º–∏–Ω)
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ payments (15 –º–∏–Ω)
3. SSO –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (20 –º–∏–Ω)
4. SCORM deployment (15 –º–∏–Ω)
5. Webinar setup (10 –º–∏–Ω)

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞:
- `/examples/payment-flow` - –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–ø–ª–∞—Ç—ã
- `/examples/scorm-integration` - SCORM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- `/examples/sso-setup` - SSO –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

---

## üìù Changelog

### Phase 3.0.0 (2024-11-24)

**Added:**
- ‚úÖ Subscription plans –∏ billing
- ‚úÖ Multi-tenancy —Å –∏–∑–æ–ª—è—Ü–∏–µ–π
- ‚úÖ Payment gateways (Stripe, Payme, Click)
- ‚úÖ SCORM 1.2 & 2004 support
- ‚úÖ Live webinars (Zoom, Jitsi)
- ‚úÖ White-label –±—Ä–µ–Ω–¥–∏–Ω–≥
- ‚úÖ SSO (SAML, OAuth2, OIDC, LDAP)
- ‚úÖ REST API —Å rate limiting
- ‚úÖ Invoice generation
- ‚úÖ 23 –Ω–æ–≤—ã—Ö frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ 26 backend —Ñ–∞–π–ª–æ–≤
- ‚úÖ Comprehensive documentation

**Total:**
- Frontend: 8,134 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- Backend: 5,500+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- Documentation: 4,000+ —Å—Ç—Ä–æ–∫

---

## üöÄ Roadmap (Phase 4)

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **AI Integration** ü§ñ
   - Content generation
   - Smart recommendations
   - Auto-grading
   - Chatbot support

2. **Mobile Apps** üì±
   - iOS app (React Native)
   - Android app (React Native)
   - Offline mode
   - Push notifications

3. **Advanced Analytics** üìä
   - Learning paths analytics
   - Predictive models
   - Custom reports
   - Data export

4. **Gamification** üéÆ
   - Badges & achievements
   - Leaderboards
   - Points system
   - Challenges

5. **Marketplace** üõí
   - Course marketplace
   - Template library
   - Plugin system
   - Third-party integrations

---

## ‚≠ê Credits

**Development Team:**
- Backend: NestJS + TypeORM
- Frontend: Angular 17+ Standalone
- DevOps: Docker + Kubernetes
- Design: Custom CSS

**Special Thanks:**
- Stripe –¥–ª—è payment processing
- Zoom –¥–ª—è webinar integration
- Community contributors

---

## üìÑ License

MIT License - —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 24 –Ω–æ—è–±—Ä—è 2024
**–í–µ—Ä—Å–∏—è:** 3.0.0
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

---

üéâ **–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∑–∞–ø—É—Å–∫—É!** üéâ
